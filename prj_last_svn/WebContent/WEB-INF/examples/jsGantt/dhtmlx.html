
<!DOCTYPE html>
<head>
	<meta http-equiv="Content-type" content="text/html; charset=utf-8">
	<title>DHTMLX Gantt Chart - Filtering, Zooming, and Custom Time Scale</title>
	<meta name="description" content="A Gantt chart demo with custom time scale (weekends are hidden), filtering and zooming capabilities."/>
	<meta name="keywords" content="javascript, gantt chart, gantt, charting, library, ajax, ui, project, task, management, zooming, filtering, visualization, demo"/>

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-KFBJNX');</script>
<!-- End Google Tag Manager -->


	<script src="gantt/dhtmlxgantt.js?v=4.0" type="text/javascript" charset="utf-8"></script>
	<link rel="stylesheet" href="gantt/skins/dhtmlxgantt_broadway.css?v=4.0" type="text/css" media="screen" title="no title" charset="utf-8">
		
	<style type="text/css" media="screen">
		html, body{
			margin:0px;
			padding:0px;
			height:100%;
			overflow:hidden;
		}
		.sample_header input, .sample_header span, .sample_header strong{
			vertical-align: middle;
		}
		#filter_days, #filter_hours{
			display: inline-block;
		}
		.sample_header input{
			margin: 0 0 0 6px;
		}
		.sample_header label span{
			padding-right: 4px;
		}
		.sample_header label{
			cursor:pointer;
		}

		.project{
			background:#3C9445;
			border-color: #3C9445;
		}
		.project .gantt_task_progress{
			background:#65C16F;
			box-shadow: none;
			border:none;
		}

		.weekend{ background: #f4f7f4 !important;}
		.gantt_selected .weekend{
			background:#FFF3A1 !important;
		}
		.gantt_task_line.project{
			background-image: none;
		}
		.gantt_task_line {
			background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowNEE4NEUwREFFQTYxMUUzOEMzREFBRTVCQjg1NkI5NiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDowNEE4NEUwRUFFQTYxMUUzOEMzREFBRTVCQjg1NkI5NiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjA0QTg0RTBCQUVBNjExRTM4QzNEQUFFNUJCODU2Qjk2IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjA0QTg0RTBDQUVBNjExRTM4QzNEQUFFNUJCODU2Qjk2Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+u/+i7gAAACRJREFUeNpidD34mwEMLn1kYIKzgIAFQgGBHj9MBsgCAoAAAwAVeQfO2h1NhwAAAABJRU5ErkJggg==);
		}

		.controls_bar{
			border-top:1px solid #bababa;
			border-bottom:1px solid #bababa;
			clear:both;
			margin-top:90px;
			height:28px;
			background:#f1f1f1;
			color:#494949;
			font-family:Arial, sans-serif;
			font-size:13px;
			padding-left:10px;
			line-height:25px
		}


	</style>
</head>
<body onresize="modSampleHeight()">
<!--[if lte IE 7]>
<style type="text/css">div{display:none;}</style>
<h4 style='text-align:center; font-family:Arial; margin-top:50px;'>Unfortunately dhtmlxGantt 2.0 doesn't support IE6 and IE7 browsers.<br>Please open these demos in different browser or in IE8+.</h3>
<![endif]-->
	<script>
		function modSampleHeight(){
			var headHeight = 122;

			var sch = document.getElementById("gantt_here");
			sch.style.height = (parseInt(document.body.offsetHeight)-headHeight)+"px";
			var contbox = document.getElementById("contbox");
			contbox.style.width = (parseInt(document.body.offsetWidth)-300)+"px";

			gantt.setSizes();
		}
	</script>
	<div class='sample_header' style="height:120px;background-color:#3D3D3D;border-bottom:5px solid #828282; overflow:hidden;">
		<div>
		<a style="float:left;margin:22px 0 0 25px;" href="08_big_dataset.html"><img border="0" src="images/btn-left.gif"></a>
		<div id="contbox" style="float:left;color:white;margin:22px 75px 0 75px; overflow:hidden;font: 17px Arial,Helvetica;color:white">
			<div style="border-right:5px solid #2D8EB6;color:#2D8EB6;width:175px;height:50px;float:left;text-align:right;padding-right:25px;">Filtering and Zooming in Gantt Chart</div>
			<div style="font-size:12px;padding-left:225px;max-width:500px;">This demo shows a Gantt chart with filtering and zooming capabilities.</div>
			<div style="font-size:12px;padding-left:225px;margin-top:5px;color:#949292;max-width:500px;">
You can edit the tasks, manage dependencies, and set the percentage of completion right on the chart using intuitive drag-and-drop interface. Use the radio buttons at the top to try filtering and zooming features.</div>
		</div>
		<a style="float:right;margin:22px 25px 0 0;" href="10_task_constraints.html"><img border="0" src="images/btn-right.gif"></a>
		</div>
		<div class='controls_bar'>
			<strong> Filtering: &nbsp; </strong>
			<label>
				<input name='filter' onclick='filter_tasks(this);' type='radio' value='' checked='true'>
				<span>All tasks</span></label>
			<label>
				<input name='filter' onclick='filter_tasks(this);' type='radio' value='1'>
				<span>Low priority</span></label>
			<label>
				<input name='filter' onclick='filter_tasks(this);' type='radio' value='2'>
				<span>High priority</span></label>
			<span>&nbsp; &nbsp; | &nbsp; &nbsp; </span>
			<strong> Zooming: &nbsp; </strong>
			<label>
				<input name='scales' onclick='zoom_tasks(this)' type='radio' value='week'>
				<span>Hours</span></label>
			<label>
				<input name='scales' onclick='zoom_tasks(this)' type='radio' value='trplweek'  checked='true'>
				<span>Days</span></label>
			<label>
				<input name='scales' onclick='zoom_tasks(this)' type='radio' value='year'>
				<span>Months</span></label>

			<div id="filter_hours">

				<span>&nbsp; &nbsp; | &nbsp; &nbsp; </span>
				<strong> Display: &nbsp; </strong>
				<label>
					<input name='scales_filter' onclick='set_scale_units(this)' type='radio' value='full_day'>
					<span>Full day</span>
				</label>
				<label>
					<input name='scales_filter' onclick='set_scale_units(this)' type='radio' value='work_hours'>
					<span>Office hours</span>
				</label>
			</div>
			<div id="filter_days">

				<span>&nbsp; &nbsp; | &nbsp; &nbsp; </span>
				<strong> Display: &nbsp; </strong>
				<label>
					<input name='scales_filter' onclick='set_scale_units(this)' type='radio' value='full_week'>
					<span>Full week</span>
				</label>
				<label>
					<input name='scales_filter' onclick='set_scale_units(this)' type='radio' value='work_week'>
					<span>Workdays</span>
				</label>
			</div>
		</div>
	</div>

	<div id="gantt_here" style='width:100%; height:100%;'></div>
	<script type="text/javascript">
var demo_tasks = {
	data:[
		{"id":1, "text":"Office itinerancy", "order":"10", progress: 0.4, open: true, priority:0, project:1 },

		{"id":2, "text":"Office facing", "start_date":"02-04-2013", "duration":"8", progress:0.5, "order":"10", progress: 0.6, "parent":"1", open: true, priority:1 },
		{"id":3, "text":"Furniture installation", "start_date":"11-04-2013", "duration":"8", "order":"20", "parent":"1", progress: 0.6, open: true, priority:1 },
		{"id":4, "text":"The employee relocation", "start_date":"13-04-2013", "duration":"6", "order":"30", "parent":"1", progress: 0.5, open: true, priority:1 },

        {"id":5, "text":"Interior office", "start_date":"02-04-2013", "duration":"7", "order":"3", "parent":"2", progress: 0.6, open: true, priority:0 },
        {"id":6, "text":"Air conditioners check", "start_date":"03-04-2013", "duration":"7", "order":"3", "parent":"2", progress: 0.6, open: true, priority:0 },
        {"id":7, "text":"Workplaces preparation", "start_date":"11-04-2013", "duration":"8", "order":"3", "parent":"3", progress: 0.6, open: true, priority:0 },
        {"id":8, "text":"Preparing workplaces", "start_date":"14-04-2013", "duration":"5", "order":"3", "parent":"4", progress: 0.5, open: true, priority:0 },
        {"id":9, "text":"Workplaces importation", "start_date":"14-04-2013", "duration":"4", "order":"3", "parent":"4", progress: 0.5, open: true, priority:0 },
        {"id":10, "text":"Workplaces exportation", "start_date":"14-04-2013", "duration":"3", "order":"3", "parent":"4", progress: 0.5, open: true, priority:0 },

        {"id":11, "text":"Product launch", "order":"5", progress: 0.6, open: true, priority:2, project:1},

        {"id":12, "text":"Perform Initial testing", "start_date":"03-04-2013", "duration":"5", "order":"3", "parent":"11", progress: 1, open: true, priority:0 },
        {"id":13, "text":"Development", "start_date":"02-04-2013", "duration":"7", "order":"3", "parent":"11", progress: 0.5, open: true, priority:2 },
        {"id":14, "text":"Analysis", "start_date":"02-04-2013", "duration":"6", "order":"3", "parent":"11", progress: 0.8, open: true, priority:2 },
        {"id":15, "text":"Design", "start_date":"02-04-2013", "duration":"5", "order":"3", "parent":"11", progress: 0.2, open: true, priority:0 },
        {"id":16, "text":"Documentation creation", "start_date":"02-04-2013", "duration":"7", "order":"3", "parent":"11", progress: 0, open: true, priority:0 },

        {"id":17, "text":"Develop System", "start_date":"03-04-2013", "duration":"2", "order":"3", "parent":"13", progress: 1, open: true, priority:2 },
        {"id":18, "text":"Integrate System", "start_date":"06-04-2013", "duration":"3", "order":"3", "parent":"13", progress: 0.8, open: true, priority:2 },
        {"id":19, "text":"Test", "start_date":"10-04-2013", "duration":"4", "order":"3", "parent":"13", progress: 0.2, open: true, priority:2 },
        {"id":20, "text":"Marketing", "start_date":"10-04-2013", "duration":"4", "order":"3", "parent":"13", progress: 0, open: true, priority:2 },

        {"id":21, "text":"Design database", "start_date":"03-04-2013", "duration":"4", "order":"3", "parent":"15", progress: 0.5, open: true, priority:0 },
        {"id":22, "text":"Software design", "start_date":"03-04-2013", "duration":"4", "order":"3", "parent":"15", progress: 0.1, open: true, priority:0 },
        {"id":23, "text":"Interface setup", "start_date":"03-04-2013", "duration":"5", "order":"3", "parent":"15", progress: 0, open: true}
	],
	links:[
		{id:"1",source:"1",target:"2",type:"1"},
		{id:"2",source:"2",target:"3",type:"0"},
		{id:"3",source:"3",target:"4",type:"0"},
		{id:"4",source:"2",target:"5",type:"2"},
        {id:"5",source:"2",target:"6",type:"2"},
		{id:"6",source:"3",target:"7",type:"2"},
		{id:"7",source:"4",target:"8",type:"2"},
        {id:"8",source:"4",target:"9",type:"2"},
        {id:"9",source:"4",target:"10",type:"2"},

        {id:"10",source:"11",target:"12",type:"1"},
        {id:"11",source:"11",target:"13",type:"1"},
        {id:"12",source:"11",target:"14",type:"1"},
        {id:"13",source:"11",target:"15",type:"1"},
        {id:"14",source:"11",target:"16",type:"1"},

        {id:"15",source:"13",target:"17",type:"1"},
        {id:"16",source:"17",target:"18",type:"0"},
        {id:"17",source:"18",target:"19",type:"0"},
        {id:"18",source:"19",target:"20",type:"0"},
        {id:"19",source:"15",target:"21",type:"2"},
        {id:"20",source:"15",target:"22",type:"2"},
        {id:"21",source:"15",target:"23",type:"2"}
	]
};

		gantt.attachEvent("onBeforeTaskDisplay", function(id, task){
			if (gantt_filter)
				if (task.priority != gantt_filter)
					return false;
			
			return true;
		});

		gantt.templates.scale_cell_class = function(date){
		    if(date.getDay()==0||date.getDay()==6){
		        return "weekend";
		    }
		};
		gantt.templates.task_cell_class = function(item,date){
		    if(date.getDay()==0||date.getDay()==6){ 
		        return "weekend" ;
		    }
		};

		var gantt_filter = 0;
		function filter_tasks(node){
			gantt_filter = node.value;
			gantt.refreshData();
		}


		function show_scale_options(mode){
			var hourConf = document.getElementById("filter_hours"),
				dayConf = document.getElementById("filter_days");
			if(mode == 'day'){
				hourConf.style.display = "none";
				dayConf.style.display = "";
				dayConf.getElementsByTagName("input")[0].checked = true;
			}else if(mode == "hour"){
				hourConf.style.display = "";
				dayConf.style.display = "none";
				hourConf.getElementsByTagName("input")[0].checked = true;
			}else{
				hourConf.style.display = "none";
				dayConf.style.display = "none";
			}
		}
		function set_scale_units(mode){
			if(mode && mode.getAttribute){
				mode = mode.getAttribute("value");
			}

			switch (mode){
				case "work_hours":
					gantt.config.subscales = [
						{unit:"hour", step:1, date:"%H"}
					];
					gantt.ignore_time = function(date){
						if(date.getHours() < 9 || date.getHours() > 16){
							return true;
						}else{
							return false;
						}
					};

					break;
				case "full_day":
					gantt.config.subscales = [
						{unit:"hour", step:3, date:"%H"}
					];
					gantt.ignore_time = null;
					break;
				case "work_week":
					gantt.ignore_time = function(date){
						if(date.getDay() == 0 || date.getDay() == 6){
							return true;
						}else{
							return false;
						}
					};

					break;
				default:
					gantt.ignore_time = null;
					break;
			}
			gantt.render();
		}


		function zoom_tasks(node){
			switch(node.value){
				case "week":
					gantt.config.scale_unit = "day"; 
					gantt.config.date_scale = "%d %M"; 

					gantt.config.scale_height = 60;
					gantt.config.min_column_width = 30;
					gantt.config.subscales = [
  						  {unit:"hour", step:1, date:"%H"}
					];
					show_scale_options("hour");
				break;
				case "trplweek":
					gantt.config.min_column_width = 70;
					gantt.config.scale_unit = "day"; 
					gantt.config.date_scale = "%d %M"; 
					gantt.config.subscales = [ ];
					gantt.config.scale_height = 35;
					show_scale_options("day");
				break;
				case "month":
					gantt.config.min_column_width = 70;
					gantt.config.scale_unit = "week"; 
					gantt.config.date_scale = "Week #%W"; 
					gantt.config.subscales = [
  						  {unit:"day", step:1, date:"%D"}
					];
					show_scale_options();
					gantt.config.scale_height = 60;
				break;
				case "year":
					gantt.config.min_column_width = 70;
					gantt.config.scale_unit = "month"; 
					gantt.config.date_scale = "%M"; 
					gantt.config.scale_height = 60;
					show_scale_options();
					gantt.config.subscales = [
  						  {unit:"week", step:1, date:"#%W"}
					];
				break;
			}
			set_scale_units();
			gantt.render();
		}

		show_scale_options("day");
		gantt.config.details_on_create = true;

		gantt.templates.task_class = function(start, end, obj){
			return obj.project ? "project" : "";
		}

		gantt.config.columns = [
		    {name:"text",       label:"Task name",  width:"*", tree:true },
		    {name:"progress",   label:"Status",  template:function(obj){
				return Math.round(obj.progress*100)+"%";
		    }, align: "center", width:60 },
		    {name:"priority",   label:"Priority",  template:function(obj){
				return gantt.getLabel("priority", obj.priority);
		    }, align: "center", width:60 },
		    {name:"add",        label:"",           width:44 }
		];
		gantt.config.grid_width = 390;

		gantt.attachEvent("onTaskCreated", function(obj){
			obj.duration = 4;
			obj.progress = 0.25;
		})

		gantt.locale.labels["section_priority"] = "Priority";
	    gantt.config.lightbox.sections = [
	        {name: "description", height: 38, map_to: "text", type: "textarea", focus: true},
	        {name: "priority", height: 22, map_to: "priority", type: "select", options: [
	        	{key:"1", label: "Low"}, 
	        	{key:"0", label: "Normal"}, 
	        	{key:"2", label: "High"} ]},
	        {name: "time", type: "duration", map_to: "auto", time_format:["%d","%m","%Y","%H:%i"]}
	    ];

		gantt.init("gantt_here");
		modSampleHeight();
		gantt.parse(demo_tasks);
	</script>
</body>